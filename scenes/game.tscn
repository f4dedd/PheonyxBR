[gd_scene load_steps=51 format=3 uid="uid://vp1nmsiqt5yv"]

[ext_resource type="Script" path="res://scripts/game/Runner.cs" id="1_1hgss"]
[ext_resource type="ArrayMesh" uid="uid://rniojt7yiv8q" path="res://meshes/squircle.obj" id="2_chdyw"]
[ext_resource type="Texture2D" uid="uid://b3g4aw54n6bow" path="res://skin/grid.png" id="2_q78ea"]
[ext_resource type="Script" path="res://scripts/game/Renderer.cs" id="3_ew8wr"]
[ext_resource type="Texture2D" uid="uid://3e1tjlr4m0wt" path="res://skin/cursor.png" id="3_negii"]
[ext_resource type="Theme" uid="uid://dhuhu3mmaew1a" path="res://theme/theme.tres" id="4_rvp5o"]
[ext_resource type="FontFile" uid="uid://4bnnn01f4dqr" path="res://fonts/Ubuntu-Medium.ttf" id="5_pxgh4"]
[ext_resource type="Texture2D" uid="uid://cxv6ey5xb6b0f" path="res://skin/health_background.png" id="6_bbly8"]
[ext_resource type="Texture2D" uid="uid://4x2vfpyjkri6" path="res://skin/health.png" id="7_wjg6i"]
[ext_resource type="Texture2D" uid="uid://dmc5f6ajp8xv1" path="res://skin/progress_background.png" id="8_eu3ux"]
[ext_resource type="Texture2D" uid="uid://d3s17ehomjscd" path="res://skin/progress.png" id="9_nde5v"]
[ext_resource type="Texture2D" uid="uid://80bitp5weqrb" path="res://skin/panel_left_background.png" id="11_sdncv"]
[ext_resource type="Texture2D" uid="uid://diba7c3s8as4s" path="res://skin/panel_right_background.png" id="12_whe6p"]
[ext_resource type="Texture2D" uid="uid://dw2gxd3m24h4m" path="res://skin/hits.png" id="13_6rhgc"]
[ext_resource type="Texture2D" uid="uid://c3x2cp3tx4vqt" path="res://skin/misses.png" id="14_bqf11"]

[sub_resource type="ViewportTexture" id="ViewportTexture_2wd1o"]
viewport_path = NodePath("Camera3D/SubViewport")

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_f6huk"]
panorama = SubResource("ViewportTexture_2wd1o")
filter = false

[sub_resource type="Sky" id="Sky_30au6"]
sky_material = SubResource("PanoramaSkyMaterial_f6huk")

[sub_resource type="Environment" id="Environment_dn4lr"]
background_mode = 1
background_canvas_max_layer = -1
sky = SubResource("Sky_30au6")
sky_custom_fov = 73.8
ambient_light_source = 2
ambient_light_color = Color(1, 1, 1, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_73q55"]
transparency = 1
cull_mode = 2
shading_mode = 0
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true

[sub_resource type="MultiMesh" id="MultiMesh_almyi"]
transform_format = 1
use_colors = true
mesh = ExtResource("2_chdyw")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_a6jk1"]
resource_name = "Material"
transparency = 1
shading_mode = 0
albedo_texture = ExtResource("2_q78ea")
texture_repeat = false

[sub_resource type="QuadMesh" id="QuadMesh_aih2q"]
material = SubResource("StandardMaterial3D_a6jk1")
size = Vector2(4, 4)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ssr8x"]
transparency = 1
cull_mode = 2
shading_mode = 0
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true
albedo_texture = ExtResource("13_6rhgc")

[sub_resource type="QuadMesh" id="QuadMesh_5p2n8"]

[sub_resource type="MultiMesh" id="MultiMesh_e28va"]
transform_format = 1
use_colors = true
mesh = SubResource("QuadMesh_5p2n8")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_lvhmj"]
transparency = 1
shading_mode = 0
albedo_texture = ExtResource("3_negii")

[sub_resource type="QuadMesh" id="QuadMesh_xij4d"]
material = SubResource("StandardMaterial3D_lvhmj")
size = Vector2(0.263, 0.263)

[sub_resource type="ViewportTexture" id="ViewportTexture_q2syx"]
viewport_path = NodePath("HealthViewport")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_4p8vu"]
resource_local_to_scene = true
transparency = 1
shading_mode = 0
albedo_texture = SubResource("ViewportTexture_q2syx")
texture_repeat = false

[sub_resource type="QuadMesh" id="QuadMesh_b1hbo"]
resource_local_to_scene = true
material = SubResource("StandardMaterial3D_4p8vu")
size = Vector2(10.88, 0.8)

[sub_resource type="ViewportTexture" id="ViewportTexture_n4au3"]
viewport_path = NodePath("ProgressBarViewport")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_p1h21"]
resource_local_to_scene = true
transparency = 1
shading_mode = 0
albedo_texture = SubResource("ViewportTexture_n4au3")
texture_repeat = false

[sub_resource type="QuadMesh" id="QuadMesh_7mook"]
resource_local_to_scene = true
material = SubResource("StandardMaterial3D_p1h21")
size = Vector2(10.88, 0.8)

[sub_resource type="ViewportTexture" id="ViewportTexture_5nddi"]
viewport_path = NodePath("VideoViewport")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_rj3ky"]
resource_local_to_scene = true
transparency = 1
shading_mode = 0
albedo_texture = SubResource("ViewportTexture_5nddi")
texture_filter = 1
texture_repeat = false

[sub_resource type="QuadMesh" id="QuadMesh_3p7x2"]
size = Vector2(258.3, 210)

[sub_resource type="ViewportTexture" id="ViewportTexture_b0vun"]
viewport_path = NodePath("PanelLeftViewport")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_nody0"]
resource_local_to_scene = true
transparency = 1
shading_mode = 0
albedo_texture = SubResource("ViewportTexture_b0vun")
texture_repeat = false

[sub_resource type="QuadMesh" id="QuadMesh_ssyve"]
size = Vector2(4, 10)

[sub_resource type="ViewportTexture" id="ViewportTexture_crm1r"]
viewport_path = NodePath("PanelRightViewport")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ro5ir"]
resource_local_to_scene = true
transparency = 1
shading_mode = 0
albedo_texture = SubResource("ViewportTexture_crm1r")
texture_repeat = false

[sub_resource type="FFmpegVideoStream" id="FFmpegVideoStream_aj2pp"]

[sub_resource type="LabelSettings" id="LabelSettings_usmyc"]
font = ExtResource("5_pxgh4")
font_size = 160

[sub_resource type="LabelSettings" id="LabelSettings_5bid2"]
font_size = 96
font_color = Color(1, 1, 1, 0.627451)

[sub_resource type="LabelSettings" id="LabelSettings_4qhw1"]
font_size = 96
font_color = Color(1, 1, 1, 0.627451)

[sub_resource type="LabelSettings" id="LabelSettings_g4ffu"]
font_size = 160
font_color = Color(1, 1, 1, 0.768627)

[sub_resource type="LabelSettings" id="LabelSettings_s1j5a"]
font_size = 160

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_t86sn"]

[sub_resource type="LabelSettings" id="LabelSettings_1hyik"]
font_size = 18
outline_size = 5
outline_color = Color(0, 0, 0, 0.501961)

[node name="SceneGame" type="Node3D"]
script = ExtResource("1_1hgss")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 3.75)
environment = SubResource("Environment_dn4lr")
fov = 70.0

[node name="Notes" type="MultiMeshInstance3D" parent="."]
material_override = SubResource("StandardMaterial3D_73q55")
cast_shadow = 0
multimesh = SubResource("MultiMesh_almyi")
script = ExtResource("3_ew8wr")

[node name="Grid" type="MeshInstance3D" parent="."]
mesh = SubResource("QuadMesh_aih2q")

[node name="CursorTrail" type="MultiMeshInstance3D" parent="."]
material_override = SubResource("StandardMaterial3D_ssr8x")
multimesh = SubResource("MultiMesh_e28va")

[node name="Cursor" type="MeshInstance3D" parent="."]
mesh = SubResource("QuadMesh_xij4d")

[node name="Health" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.965926, 0.258819, 0, -0.258819, 0.965926, 0, -6.2, -10)
cast_shadow = 0
mesh = SubResource("QuadMesh_b1hbo")

[node name="ProgressBar" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.965926, -0.258819, 0, 0.258819, 0.965926, 0, 6.3, -10)
cast_shadow = 0
mesh = SubResource("QuadMesh_7mook")

[node name="Video" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -100)
material_override = SubResource("StandardMaterial3D_rj3ky")
transparency = 1.0
cast_shadow = 0
mesh = SubResource("QuadMesh_3p7x2")

[node name="PanelLeft" type="MeshInstance3D" parent="."]
transform = Transform3D(0.984808, 0, 0.173648, 0, 1, 0, -0.173648, 0, 0.984808, -7.5, 0, -9)
material_override = SubResource("StandardMaterial3D_nody0")
mesh = SubResource("QuadMesh_ssyve")

[node name="PanelRight" type="MeshInstance3D" parent="."]
transform = Transform3D(0.984808, 0, -0.173648, 0, 1, 0, 0.173648, 0, 0.984808, 7.5, 0, -9)
material_override = SubResource("StandardMaterial3D_ro5ir")
mesh = SubResource("QuadMesh_ssyve")

[node name="Progress" type="Label3D" parent="."]
transform = Transform3D(3.5, 0, 0, 0, 3.38074, -0.905867, 0, 0.905867, 3.38074, 0, 7, -10)
pixel_size = 0.0025
modulate = Color(1, 1, 1, 0.25098)
outline_modulate = Color(0, 0, 0, 0)
text = "0:00 / 0:00"
font = ExtResource("5_pxgh4")
font_size = 64

[node name="Title" type="Label3D" parent="."]
transform = Transform3D(2, 0, 0, 0, 1.93185, -0.517638, 0, 0.517638, 1.93185, 0, 8.25, -10)
outline_modulate = Color(0, 0, 0, 0)
text = "N/A - N/A"
font = ExtResource("5_pxgh4")
font_size = 64
autowrap_mode = 3
width = 2500.0

[node name="Combo" type="Label3D" parent="."]
transform = Transform3D(7, 0, 0, 0, 6.89365, -1.21554, 0, 1.21554, 6.89365, 0, 3.5, -10)
pixel_size = 0.0025
modulate = Color(1, 1, 1, 0)
outline_modulate = Color(1, 1, 1, 0.0941176)
text = "0"
font = ExtResource("5_pxgh4")
font_size = 64
outline_size = 4

[node name="Speed" type="Label3D" parent="."]
transform = Transform3D(7, 0, 0, 0, 6.76148, 1.81173, 0, -1.81173, 6.76148, 0, -7.5, -10)
pixel_size = 0.0025
modulate = Color(1, 1, 1, 0.12549)
outline_modulate = Color(0, 0, 0, 0)
text = "1.00x"
font = ExtResource("5_pxgh4")

[node name="Skip" type="Label3D" parent="."]
transform = Transform3D(7, 0, 0, 0, 6.76148, 1.81173, 0, -1.81173, 6.76148, 0, -5, -10)
pixel_size = 0.0025
modulate = Color(1, 1, 1, 0)
outline_modulate = Color(0, 0, 0, 0)
text = "Press Space to skip"
font = ExtResource("5_pxgh4")

[node name="VideoViewport" type="SubViewport" parent="."]
transparent_bg = true
size = Vector2i(1920, 1080)

[node name="VideoStreamPlayer" type="VideoStreamPlayer" parent="VideoViewport"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = 8.0
grow_horizontal = 2
grow_vertical = 2
stream = SubResource("FFmpegVideoStream_aj2pp")
volume_db = -80.0
expand = true

[node name="PanelRightViewport" type="SubViewport" parent="."]
process_mode = 3
disable_3d = true
transparent_bg = true
size = Vector2i(800, 2000)

[node name="Background" type="TextureRect" parent="PanelRightViewport"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("12_whe6p")

[node name="Accuracy" type="Label" parent="PanelRightViewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -247.0
offset_top = -300.0
offset_right = 247.0
offset_bottom = -149.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("4_rvp5o")
text = "100.00%"
label_settings = SubResource("LabelSettings_usmyc")
horizontal_alignment = 1

[node name="Hits" type="Label" parent="PanelRightViewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -555.0
offset_top = 96.0
offset_right = -90.0
offset_bottom = 247.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
theme = ExtResource("4_rvp5o")
text = "0"
label_settings = SubResource("LabelSettings_5bid2")
horizontal_alignment = 2

[node name="Misses" type="Label" parent="PanelRightViewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = 91.0
offset_top = 96.0
offset_right = 556.0
offset_bottom = 247.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
theme = ExtResource("4_rvp5o")
text = "0"
label_settings = SubResource("LabelSettings_4qhw1")

[node name="SimpleMisses" type="Label" parent="PanelRightViewport"]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
theme = ExtResource("4_rvp5o")
text = "0"
label_settings = SubResource("LabelSettings_g4ffu")

[node name="Sum" type="Label" parent="PanelRightViewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -236.0
offset_top = 230.0
offset_right = 229.0
offset_bottom = 381.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
theme = ExtResource("4_rvp5o")
text = "0"
label_settings = SubResource("LabelSettings_s1j5a")
horizontal_alignment = 1

[node name="HitsIcon" type="TextureRect" parent="PanelRightViewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -74.0
offset_top = 120.0
offset_right = -10.0
offset_bottom = 184.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("4_rvp5o")
texture = ExtResource("13_6rhgc")
expand_mode = 2

[node name="MissesIcon" type="TextureRect" parent="PanelRightViewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = 10.0
offset_top = 120.0
offset_right = 74.0
offset_bottom = 184.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("4_rvp5o")
texture = ExtResource("14_bqf11")
expand_mode = 2

[node name="Line" type="ColorRect" parent="PanelRightViewport"]
anchors_preset = 14
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = 100.0
offset_top = 218.0
offset_right = -100.0
offset_bottom = 222.0
grow_horizontal = 2
grow_vertical = 2

[node name="PanelLeftViewport" type="SubViewport" parent="."]
disable_3d = true
transparent_bg = true
size = Vector2i(800, 2000)

[node name="Background" type="TextureRect" parent="PanelLeftViewport"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("11_sdncv")

[node name="Score" type="Label" parent="PanelLeftViewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -247.0
offset_top = -300.0
offset_right = 247.0
offset_bottom = -149.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("4_rvp5o")
text = "0"
label_settings = SubResource("LabelSettings_usmyc")
horizontal_alignment = 1

[node name="Multiplier" type="Label" parent="PanelLeftViewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -247.0
offset_top = 100.0
offset_right = 247.0
offset_bottom = 289.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("4_rvp5o")
text = "1x"
label_settings = SubResource("LabelSettings_usmyc")
horizontal_alignment = 1

[node name="HealthViewport" type="SubViewport" parent="."]
disable_3d = true
transparent_bg = true
size = Vector2i(1088, 80)
render_target_update_mode = 4

[node name="Background" type="TextureRect" parent="HealthViewport"]
offset_right = 1088.0
offset_bottom = 80.0
texture = ExtResource("6_bbly8")

[node name="Main" type="TextureRect" parent="HealthViewport"]
offset_right = 1088.0
offset_bottom = 80.0
texture = ExtResource("7_wjg6i")
expand_mode = 1
stretch_mode = 1

[node name="ProgressBarViewport" type="SubViewport" parent="."]
disable_3d = true
transparent_bg = true
size = Vector2i(1088, 80)
render_target_update_mode = 4

[node name="Background" type="TextureRect" parent="ProgressBarViewport"]
offset_right = 1088.0
offset_bottom = 80.0
texture = ExtResource("8_eu3ux")

[node name="Main" type="TextureRect" parent="ProgressBarViewport"]
offset_right = 1088.0
offset_bottom = 80.0
texture = ExtResource("9_nde5v")
expand_mode = 1
stretch_mode = 1

[node name="SongPlayer" type="AudioStreamPlayer" parent="."]
volume_db = -25.0

[node name="HitSoundPlayer" type="AudioStreamPlayer" parent="."]
volume_db = -8.0
max_polyphony = 8

[node name="FailSoundPlayer" type="AudioStreamPlayer" parent="."]
volume_db = -8.0

[node name="FPSCounter" type="Label" parent="."]
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -23.0
offset_right = 51.0
grow_vertical = 0
theme = ExtResource("4_rvp5o")
text = "60 FPS"

[node name="NotificationHolder" type="VBoxContainer" parent="."]
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -210.0
offset_top = -110.0
offset_right = -10.0
offset_bottom = -10.0
grow_horizontal = 0
grow_vertical = 0
mouse_filter = 2
alignment = 2

[node name="Volume" type="Panel" parent="."]
modulate = Color(1, 1, 1, 0)
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -128.0
offset_top = -38.0
offset_right = 128.0
offset_bottom = -32.0
grow_horizontal = 2
grow_vertical = 0
mouse_filter = 2
theme_override_styles/panel = SubResource("StyleBoxEmpty_t86sn")

[node name="Label" type="Label" parent="Volume"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 2.0
offset_top = -14.0
grow_horizontal = 2
grow_vertical = 0
text = "100"
label_settings = SubResource("LabelSettings_1hyik")
horizontal_alignment = 1
vertical_alignment = 1

[node name="Background" type="ColorRect" parent="Volume"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -2.0
offset_top = -2.0
offset_right = 2.0
offset_bottom = 2.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 0.768627)

[node name="Main" type="ColorRect" parent="Volume"]
layout_mode = 1
anchors_preset = -1
anchor_bottom = 1.0
grow_vertical = 2

[node name="Transition" type="ColorRect" parent="."]
self_modulate = Color(1, 1, 1, 0)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0, 0, 0, 1)
